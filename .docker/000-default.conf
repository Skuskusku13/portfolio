<VirtualHost *:80>
    ServerName dlyhub.com
    DocumentRoot /usr/local/apache2/htdocs

    <Directory /usr/local/apache2/htdocs/>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
        DirectoryIndex index.html

        # Désactiver la mise en cache pour robots.txt pour forcer Cloudflare à le re-lire
        <Files "robots.txt">
            Header set Cache-Control "no-cache, no-store, must-revalidate"
        </Files>

        # Activation du routing côté client pour les SPA
        RewriteEngine On
        RewriteBase /
        
        # Ne pas réécrire si le fichier ou le dossier existe réellement
        RewriteCond %{REQUEST_FILENAME} -f [OR]
        RewriteCond %{REQUEST_FILENAME} -d
        RewriteRule ^ - [L]

        # Réécrire tout le reste vers index.html
        RewriteRule ^ index.html [L]
    </Directory>
</VirtualHost>